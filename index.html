<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Vector Editor</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        canvas {
            border: 1px solid black;
            margin-top: 10px;
        }
        .toolbar {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

    <h1>Online Vector Editor</h1>
    
    <div class="toolbar">
        <button onclick="addRectangle()">Add Rectangle</button>
        <button onclick="addCircle()">Add Circle</button>
        <button onclick="saveSVG()">Save as SVG</button>
        <input type="file" id="uploadSVG" accept=".svg" onchange="loadSVG(event)">
        <button onclick="clearCanvas()">Clear Canvas</button>
    </div>

    <canvas id="editorCanvas" width="800" height="600"></canvas>

    <script>
        // Initialize Fabric.js canvas
        const canvas = new fabric.Canvas('editorCanvas');

        // Function to add a rectangle
        function addRectangle() {
            const rect = new fabric.Rect({
                left: 100,
                top: 100,
                fill: 'red',
                width: 100,
                height: 100
            });
            canvas.add(rect);
        }

        // Function to add a circle
        function addCircle() {
            const circle = new fabric.Circle({
                left: 200,
                top: 200,
                fill: 'blue',
                radius: 50
            });
            canvas.add(circle);
        }

        // Save canvas as SVG
        function saveSVG() {
            const svgData = canvas.toSVG();
            const blob = new Blob([svgData], { type: "image/svg+xml" });
            const link = document.createElement("a");
            link.href = URL.createObjectURL(blob);
            link.download = "drawing.svg";
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Load an SVG file into the canvas
        function loadSVG(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function (e) {
                fabric.loadSVGFromString(e.target.result, function (objects, options) {
                    canvas.clear();
                    const obj = fabric.util.groupSVGElements(objects, options);
                    canvas.add(obj);
                    canvas.renderAll();
                });
            };
            reader.readAsText(file);
        }

        // Clear the canvas
        function clearCanvas() {
            canvas.clear();
        }
    </script>

</body>
</html>
